<div style="text-align:center">
  <h1>
    Welcome to {{ title }}!
  </h1>
</div>

<ng-container *ngIf="userAuthenticated; then authenticated else notAuthenticated"></ng-container>
<ng-template #notAuthenticated>
  <!-- If the user is not authenticated, then give them a login button and basic login instructions -->
  <div class="headerSection">
    <h2>You are not authenticated</h2>
    <p>Log in by using the external login or by using Alice / password or Bob / password for the internal login.</p>
    <ul class="actionButtonList">
      <li><input type="button" value="Log In" (click)="logIn()" /></li>
    </ul>
  </div>
</ng-template>
<ng-template #authenticated>
  <div class="headerSection">
    <h2>You're authenticated!</h2>
    <ul class="actionButtonList">
      <li><input type="button" value="Log Out" (click)="logOut()" /></li>
      <!-- Trigger an explicit silent refresh.  Generally this will happen automatically 
      behind the scenes, but we're doing it explictly here just for demonstration purposes. -->
      <li><input type="button" value="Silent Refresh" (click)="silentRefresh()" /></li>
    </ul>
  </div>
  <div class="flex-grid">
    <div class="flex-column flex-column-half">
      <h3>Public Resource</h3>
      <ng-container *ngIf="publicResource; then publicResourceFetched else publicResourceNotFetched"></ng-container>
      <ng-template #publicResourceNotFetched>
        <input type="button" value="Fetch" (click)="fetchPublicResource()" class="actionButton" />
      </ng-template>
      <ng-template #publicResourceFetched>
        <pre>{{publicResource | json}}</pre>
      </ng-template>
    </div>
    <div class="flex-column flex-column-half">
      <h3>Protected Resource</h3>
      <ng-container *ngIf="protectedResource; then protectedResourceFetched else protectedResourceNotFetched"></ng-container>
      <ng-template #protectedResourceNotFetched>
        <input type="button" value="Fetch" (click)="fetchProtectedResource()" class="actionButton" />
      </ng-template>
      <ng-template #protectedResourceFetched>
        <pre>{{protectedResource | json}}</pre>
      </ng-template>
    </div>
    <div class="flex-column flex-column-half">
      <h3>Identity Token Claims</h3>
      <pre>{{identityTokenClaims | json}}</pre>
    </div>
    <div class="flex-column flex-column-half">
      <h3>Access Token Claims</h3>
      <pre>{{accessTokenClaims | json}}</pre>
    </div>
  </div>
</ng-template>

<nli-loading-indicator></nli-loading-indicator>